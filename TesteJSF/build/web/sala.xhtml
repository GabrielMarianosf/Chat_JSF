<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <h:outputStylesheet library="default" name="CSS/stilo.css"/>
        <title>Sala de Chat | Jump of The Ch@t</title>
        <link rel="icon" href="img/icone.png"></link>
        <link rel="stylesheet" type="text/css" href="resources/default/CSS/stilo.css"></link>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"></link>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    </h:head>
    <h:body>
        <h:outputStylesheet library="default" name="CSS/stilo.css"/>
        <h:form id="sala">
            <body background="img/background.jpg"></body>
            <div bgcolor="black" width="1000px" align="center" height="10px" style="background:black;color:white;">
                <img src="img/icone.png" size="50"></img>
                <img src="img/divisor.png" width="800px"></img>
                <img src="img/divisor.png" width="300px"></img>
                <h:commandButton id="perfil" value="Perfil" action="perfil.xhtml" class="btn btn-secondary"></h:commandButton>
                <img src="img/divisor.png" width="2px"></img>
                <h:commandButton id="sair" value="Sair" class="btn btn-secondary" action="index.xhtml"></h:commandButton>
            </div>
            <br></br>
        </h:form>
        <h:form id="mensagens">
            <h:messages class="badge badge-secondary"/>
            <center>
                <div id="caixa">
                    <h:outputText value="#{chatBean.lista_msg.remetente}" class="badge badge-dark"/>
                    <h:outputText value="#{chatBean.lista_msg.mensagem}" class="badge btn-secondary"/>
                </div>
                <br></br><br></br>
                <img src="img/divisor3.png" height="1px" width="100px"></img>
                <h:inputText id="mensagem" class="btn btn-outline-dark" size="100" value="#{chatBean.mensagem.mensagem}" required="true" validatorMessage="Você não pode enviar uma mensagem vazia.">
                </h:inputText>
                <img src="img/divisor3.png" width="2px"></img>
                <h:commandButton id="enviar"  value="Enviar" action="#{chatBean.inserirMensagem()}" class="btn btn-dark">
                    <f:ajax execute="@all" render="@all"/>
                </h:commandButton>
            </center>
        </h:form>
        <script>
            $(document).ready(
                    function () {
                        setInterval(function () {
                            $('#caixa').text("#{chatBean.listarMensagens()}");
                        }, 1000);
                    });
        </script>
    </h:body>
</html>

